В<!DOCTYPE html>
<html>
<head>

  <title>web.experiment</title>
  <meta charset ="utf-8">  
  <link rel="stylesheet" href="styles.css">
  <link rel="shortcut icon" href="/assets/logo.png"/>

</head>

<body>

  <div class = 'bodydragon'>

    <div class = 'header'>

      <a href="index.html" class = home>
        <img class = 'logo' src="assets\logoforhead2.png" alt="" width="320" height="96">
      </a>

      <a href="cart.html" class = shopbutton>
        <img class = 'bin' src="assets\P example.png" alt="" width="64" height="64">
      </a>

      <a href="profile.html" class = profilebutton>
        <img class = 'profile' src="assets\profile.png" alt="" width="64" height="64">
      </a>

    </div>

    <div class = "itemshop"> 

      <img class = 'itempic' src="assets/dragonback 111.jpg" alt="" width="640" height="792">

      <div class = "itembuytext">

        <div class="itemblock"> 

          <div class = "itemname"> dragonborn jacket </div>

          <div class = "itemprice"> 10000 rub. </div>

        </div>

        <div class = "itemdesc"> 99% swag, 1% denim. Buying this jacket youre support 3 young designers from Saint-Petersbourg
        </div>

        <div class = "buttons">

          <div class="radiosize">
            <input id="radio-1" type="radio" name="radio" value="1" checked>
            <label for="radio-1">M</label>
          </div>
           
          <div class="radiosize">
            <input id="radio-2" type="radio" name="radio" value="2">
            <label for="radio-2">L</label>
          </div>
           
          <div class="radiosize">
            <input id="radio-3" type="radio" name="radio" value="3">
            <label for="radio-3">XL</label>
          </div>

          <button class = "buttonBuy"> BUY NOW </button>

        </div>

      </div>

    

    
    </div>

  </div>
  <script>
    document.querySelector('.buttonBuy').addEventListener('click', () => {
      const selected = document.querySelector('input[name="radio"]:checked');
  
      if (!selected) {
        alert('Сначала выбери размер');
        return;
      }
  
      // Получаем текст размера по value
      let size = '';
      switch (selected.value) {
        case '1': size = 'M'; break;
        case '2': size = 'L'; break;
        case '3': size = 'XL'; break;
      }
  
      fetch('/api/add-to-cart', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          productId: 'dragonborn-jacket',
          name: 'dragonborn jacket',
          size: size,
          price: 10000
        })
      })
      .then(res => res.json())
      .then(data => {
        alert(`Товар (${size}) добавлен в корзину!`);
      })
      .catch(err => {
        console.error('Ошибка добавления:', err);
        alert('Ошибка!');
      });
    });
  </script>
  
</body>

</html>
